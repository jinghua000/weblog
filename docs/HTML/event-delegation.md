# event-delegation (事件委托)

## 是什么

想象一个场景，现在有一个列表，里面有许多元素，然后我们点到每一个列表上都希望得到不同的反馈，如何实现这一效果呢。

当然这很容易，可以利用`点击事件`，给每一个元素加上我们想要的点击事件就可以实现。

然而这一个问题是可能元素数量非常多，必须加很多事件。另外一个问题是万一有新增或者删除元素，我们也必须要去对应的处理事件。

而**事件委托**就可以帮助我们更好的解决这个问题。

## 原理

我们都知道事件是`冒泡`传播的，当某个元素触发了某个`事件`，则会从最底层开始一层层往外。

比如下面这个结构

```html
<ul id="list">
  <li>1</li>
  <li>2</li>
  <li>3</li>
</ul>
```

当我们触发`LI`标签的点击事件的时候，点击事件会由`LI`->`UL`->`BODY`->`HTML`。

所以就可以利用这个特性，无论我们有多少个`LI`元素，我们只要监听他所在的父级标签的点击事件就可以了，像这样。

```js
list.addEventListener('click', evt => {
  evt.target.tagName === 'LI' 
    && alert(evt.target.textContent)
})
```

这样一来我们只需要监听一个事件就好了，简化了事件初始化，也能同时应对内部元素的变动。当然我们的判断条件可以是任何内容，只要能通过操作对象`target`区分出我们想要的元素就好。

更多其他的使用内容可以参考底部的链接，这里只是阐述其基本原理。

## 总结

虽然看上去很简单不过却是十分实用的概念，不过在使用的时候要注意如果事件被停止传播了则就获取不到了。另外如果对特别大范围的容器使用则里面所有子元素的操作都会触发到，虽然消耗不大不过还是按照需要的范围进行监听吧。

## 参考

- [event-delegation](https://javascript.info/event-delegation)
- [bubbling-and-capturing](https://javascript.info/bubbling-and-capturing)
- [相关代码](../../code/HTML/event-delegation.html)